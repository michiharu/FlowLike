var ce=Object.defineProperty,ae=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var xt=(t,e,n)=>e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e)=>{for(var n in e||(e={}))gt.call(e,n)&&xt(t,n,e[n]);if(K)for(var n of K(e))wt.call(e,n)&&xt(t,n,e[n]);return t},p=(t,e)=>ae(t,de(e));var yt=(t,e)=>{var n={};for(var o in t)gt.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&K)for(var o of K(t))e.indexOf(o)<0&&wt.call(t,o)&&(n[o]=t[o]);return n};import{c as le,a as _,b as mt,d as vt,u as Q,j as c,I as S,A as V,r as I,B as M,S as he,K as pe,T as Et,e as X,f as ue,E as bt,g as E,F as Y,G as fe,R as It,H as Ct,h as tt,i as ge,C as we,k as xe,l as ye,m as me,s as ve,n as Bt,o as Ee,P as et,L as be,p as Ie,q as Pt,t as Ce,v as Be,w as Mt,x as Pe,y as Me,z as zt,D as G,J as nt,M as Rt,N as ze,O as Re,Q as Te,U as ke,V as Fe,W as J,X as ot,Y as rt,Z as Se,_ as Ae,$ as j,a0 as Oe,a1 as Le,a2 as $e,a3 as De,a4 as Ne,a5 as Ke,a6 as Ge,a7 as Je,a8 as je}from"./vendor.4cc16d1c.js";const He=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};He();const it={path:"/TaskFlow/"},Tt="/TaskFlow/flow/:id",H={path:Tt,url:t=>`/TaskFlow/flow/${t.id}`,matchSelector:le(Tt)},st={palette:{mode:"dark"},typography:{button:{textTransform:"none"}}},We=_(st),kt=_(p(h({},st),{typography:{fontSize:10}}));_(p(h({},st),{typography:{fontSize:13}}));const ct={stagePadding:16,indent:2,m:40,card:{width:240,height:94}},Ze=()=>null,at=()=>{const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");for(let e=0,n=t.length;e<n;e+=1)switch(t[e]){case"x":t[e]=Math.floor(Math.random()*16).toString(16);break;case"y":t[e]=(Math.floor(Math.random()*4)+8).toString(16);break}return t.join("")},{card:w,indent:F,m:u,stagePadding:Ft}=ct,St=(t,e=[],n={})=>{const{flowIndex:o=0,type:r="task",direction:i="vertical",open:s=!0,text:d=""}=n;return{id:t,childIds:e,flowIndex:o,type:r,direction:i,open:s,text:d}},At=(t,e,n)=>{const o=e[t];if(!o)throw new Error;const{direction:r,childIds:i}=o,s=o.childIds.map((d,a)=>At(d,e,{id:t,direction:r,childIds:i,index:a}));return p(h({},o),{children:s,parent:n,tree:void 0,point:void 0,addable:void 0})},Ot=t=>{const{direction:e}=t;if(!t.open)return p(h({},t),{tree:w});if(t.children.length===0){const i=e==="vertical"?F*u+w.width:w.width+u,s=e==="horizontal"?F*u+w.height:w.height+u;return p(h({},t),{tree:{width:i,height:s}})}const n=t.children.map(i=>Ot(i)),o=e==="vertical"?F*u+Math.max(...n.map(i=>i.tree.width))+u:w.width+u+n.map(i=>i.tree.width+u).reduce((i,s)=>i+s),r=e==="horizontal"?F*u+Math.max(...n.map(i=>i.tree.height))+u:w.height+u+n.map(i=>i.tree.height+u).reduce((i,s)=>i+s);return p(h({},t),{tree:{width:o,height:r},children:n})},Lt=(t,e)=>{const{direction:n}=t;if(!t.open||t.children.length===0)return p(h({},t),{point:e});let o=0;const r=t.children.map(i=>{const s=e.x+(n==="vertical"?F*u:w.width+u+o),d=e.y+(n==="horizontal"?F*u:w.height+u+o);return o+=(n==="vertical"?i.tree.height:i.tree.width)+u,Lt(i,{x:s,y:d})});return p(h({},t),{point:e,children:r})},$t=(t,e,n=0)=>{if(!t.point||!t.tree)return t;const o=[],r=[];if(t.open){const{id:s,point:d,direction:a,childIds:b,tree:f}=t,v={id:s,direction:a,childIds:b,index:0},l=t.reserved==="first",g=d.x+(a==="vertical"?F*u+w.width/2:w.width+u/2),R=d.y+(a==="horizontal"?F*u+w.height/2:w.height+u/2);o.push({parent:v,left:g,top:R,reserved:l});const z=d.x+(a==="vertical"?0:w.width/2),T=d.y+(a==="horizontal"?0:w.height/2),k=a==="vertical"?f.width:w.width+u,L=a==="horizontal"?f.height:w.height+u;r.push({parent:v,from:s,depth:n+1,x:z,y:T,width:k,height:L,reservedType:"first",reserved:l})}if(e){const{id:s,point:d,direction:a,childIds:b,tree:f}=e;if(!d||!f)throw new Error;const v={id:s,direction:a,childIds:b,index:b.indexOf(t.id)+1},l=t.reserved==="next",g=t.point.x+(a==="vertical"?w.width/2:t.tree.width+u/2),R=t.point.y+(a==="horizontal"?w.height/2:t.tree.height+u/2);o.push({parent:v,left:g,top:R,reserved:l});const z=a==="vertical"?d.x:t.point.x+t.tree.width-w.width*.5,T=a==="horizontal"?d.y:t.point.y+t.tree.height-w.height*.5,k=a==="vertical"?f.width:w.width+u,L=a==="horizontal"?f.height:w.height+u;r.push({parent:v,from:t.id,depth:n,x:z,y:T,width:k,height:L,reservedType:"next",reserved:l})}const i=t.children.map(s=>$t(s,t,n+1));return p(h({},t),{addable:{points:o,zones:r},children:i})},Dt=t=>{const o=t,{children:e}=o,n=yt(o,["children"]);return[n].concat(e.flatMap((r,i)=>{const{id:s,direction:d,childIds:a}=n;return Dt(p(h({},r),{parent:{id:s,direction:d,childIds:a,index:i}}))}))},C=(t,e)=>{const{flow:n}=t;if(!n)throw new Error;const{rootId:o}=n;if(!t.entities[o])throw new Error;let r=At(o,t.entities);r=Ot(r),r=Lt(r,{x:Ft,y:Ft}),r=$t(r,void 0);const i=Dt(r).map((s,d)=>p(h({},s),{flowIndex:d}));t.addablePoints=i.flatMap(s=>{var d,a;return(a=(d=s.addable)==null?void 0:d.points)!=null?a:[]}),t.dropZones=i.flatMap(s=>{var d,a;return(a=(d=s.addable)==null?void 0:d.zones)!=null?a:[]}).sort((s,d)=>d.depth-s.depth),i.forEach(s=>delete s.addable),e.setAll(t,i)},x=mt(),qe=x.getInitialState({addablePoints:[],dropZones:[]}),m=vt({name:"flow-entity",initialState:qe,reducers:{setFlow(t,{payload:e}){x.removeAll(t),t.selected=void 0;const{id:n,title:o,rootId:r,entities:i}=e;t.flow={id:n,title:o,rootId:r},x.setAll(t,i),C(t,x)},add(t,{payload:e}){const n=t.entities[e.id];if(!n)throw new Error;const o=at();n.childIds.splice(e.index,0,o);const r=St(o,[],{open:!1});x.addOne(t,r),C(t,x)},update(t,{payload:e}){x.updateOne(t,e),C(t,x)},delete(t,{payload:e}){const n=t.entities[e.id];if(!n)throw new Error;const o=n.childIds.splice(e.index,1)[0];x.removeOne(t,o),t.selected=void 0,C(t,x)},select(t,{payload:e}){e?t.selected={id:e,status:"selected"}:t.selected=void 0,C(t,x)},editStart(t){if(!t.selected)throw new Error;t.selected.status="editing",C(t,x)},editEnd(t){if(!t.selected)throw new Error;t.selected.status="selected",C(t,x)},dragStart(t){if(!t.selected)throw new Error;t.selected.status="dragging";const{id:e}=t.selected;x.updateOne(t,{id:e,changes:{open:!1}}),C(t,x)},dragMoveReset(t){t.ids.forEach(e=>{const n=t.entities[e];if(!n)throw new Error;n.reserved=void 0}),C(t,x)},dragMoveReserve(t,{payload:{from:e,reservedType:n}}){t.ids.forEach(r=>{const i=t.entities[r];if(!i)throw new Error;i.reserved=void 0});const o=t.entities[e];if(!o)throw new Error;o.reserved=n,C(t,x)},dragEnd(t){if(!t.selected)throw new Error;t.selected.status="moving";const e=t.entities[t.selected.id];if(!e||!e.parent)throw new Error;const n=t.ids.filter(o=>{var r;return(r=t.entities[o])==null?void 0:r.reserved});if(n.length>1)throw new Error;if(n.length===1){const o=t.entities[n[0]];if(!o)throw new Error;if(o.reserved==="first"){o.childIds.splice(0,0,e.id);const r=t.entities[e.parent.id];if(!r)throw new Error;o.id===e.parent.id?r.childIds.splice(e.parent.index+1,1):r.childIds.splice(e.parent.index,1)}else{const{parent:r}=o;if(!r)throw new Error;const i=t.entities[r.id];if(!i)throw new Error;i.childIds.splice(r.index+1,0,e.id);const s=e.parent.id===r.id&&e.parent.index>r.index,d=e.parent.index+(s?1:0),a=t.entities[e.parent.id];if(!a)throw new Error;a.childIds.splice(d,1)}}C(t,x)},finishMoving(t){if(!t.selected)throw new Error;t.selected.status="selected",C(t,x)}}}),Nt=x.getSelectors(t=>t.entity),Kt=({point:t})=>{const e=Q(),{parent:n,top:o,left:r}=t;return c(S,{size:"small",sx:{position:"absolute",left:r,top:o,transform:"translate3d(-50%, -50%, 0)"},onClick:()=>e(m.actions.add(n)),children:c(V,{fontSize:"inherit"})})},Ue=({stageSize:t,children:e,refs:n})=>{const[o,r]=I.exports.useState({width:0,height:0}),i=I.exports.useRef(),s=I.exports.useRef(),d=I.exports.useCallback(f=>{if(f){i.current=f,s.current&&n&&n(f,s.current);const{width:v,height:l}=f.getBoundingClientRect();r({width:v,height:l})}},[]),a=I.exports.useCallback(f=>{f&&(s.current=f,i.current&&n&&n(i.current,f))},[]);I.exports.useEffect(()=>{const f=()=>{if(i.current){const{width:l,height:g}=i.current.getBoundingClientRect();r({width:l,height:g})}};window.addEventListener("resize",f),f();const v=()=>{if(i.current&&s.current){const l=i.current.scrollLeft,g=i.current.scrollTop;s.current.container().style.transform=`translate(${l}px, ${g}px)`,s.current.x(-l),s.current.y(-g)}};return i.current&&i.current.addEventListener("scroll",v),()=>window.removeEventListener("resize",f)},[]);const b={width:Math.max(t.width,o.width)+o.width,height:Math.max(t.height,o.height)+o.width};return c(M,{ref:d,sx:{width:"100%",height:"100%",overflow:"auto"},children:c(M,{sx:p(h({},b),{overflow:"hidden"}),children:c(he,p(h({ref:a},o),{children:e}))})})},{card:B}=ct,W=7,A=4,dt="#444a",lt=pe.Easings.EaseOut,_e=t=>{if(t.length<2)return;const e=t[0],n=t[t.length-1],o=(e.time-n.time)/400;return{x:(e.x-n.x)/o,y:(e.y-n.y)/o}},Qe=(t,{x:e,y:n})=>t.find(o=>o.x<e&&e<o.x+o.width&&o.y<n&&n<o.y+o.height),Ve=(t,e,n)=>{if(t.reserved)return"none";if(t.parent.id!==e.id)return"reserve";const o=e.childIds.indexOf(n);return t.parent.index!==o&&t.parent.index-1!==o?"reserve":"reset"},Xe=({entity:t,dropZones:e,selectedStatus:n})=>{const o=Q(),{id:r,parent:i,point:s,tree:d,open:a,direction:b,childIds:f,text:v}=t,l=I.exports.useRef(null),g=I.exports.useRef(),R=I.exports.useRef([]);!g.current&&s&&(g.current=s);const z=(n==null?void 0:n.id)===r&&n.status==="selected",T=(n==null?void 0:n.id)===r&&n.status==="editing",k=(n==null?void 0:n.id)===r&&n.status==="dragging",L=(n==null?void 0:n.id)===r&&n.status==="moving";if(I.exports.useEffect(()=>{var P;if(!g.current||!s||k)return;(g.current.x!==s.x||g.current.y!==s.y)&&((P=l.current)==null||P.to(p(h({},s),{easing:lt})),g.current=s)},[s]),I.exports.useEffect(()=>{let y;const P=()=>{if(l.current&&g.current){const q=l.current.x()-g.current.x,U=l.current.y()-g.current.y,$=Date.now();R.current=R.current.concat({x:q,y:U,time:$}).sort((ut,N)=>N.time-ut.time).slice(0,12)}};return k?y||(y=window.setInterval(P,60)):R.current=[],()=>window.clearInterval(y)},[k]),!s||!d)return null;const Jt=p(h({},g.current),{ref:l,draggable:Boolean(i),onMouseEnter(){(!n||n.status==="selected"&&(n==null?void 0:n.id)!==r)&&(o(m.actions.select(r)),a||(document.body.style.cursor="grab"))},onMouseLeave(){document.body.style.cursor="default"},onMouseDown(){!a&&Boolean(i)&&(document.body.style.cursor="grabbing")},onMouseUp(){if(!a&&Boolean(i)&&(document.body.style.cursor="grab"),!l.current||(n==null?void 0:n.status)!=="dragging")return;const y=()=>o(m.actions.finishMoving());l.current.to(p(h({},s),{easing:lt,onFinish:y})),o(m.actions.dragEnd())},onDragStart(){o(m.actions.dragStart())},onDragMove(y){var N,ft;if((n==null?void 0:n.status)==="moving"||!i||!g.current)return;const P=_e(R.current),q=y.currentTarget.x()+B.width/2+((N=P==null?void 0:P.x)!=null?N:0),U=y.currentTarget.y()+B.height/2+((ft=P==null?void 0:P.y)!=null?ft:0),$=Qe(e,{x:q,y:U});if(!$)return;switch(Ve($,i,r)){case"reserve":o(m.actions.dragMoveReserve($));break;case"reset":o(m.actions.dragMoveReset());break}},onDragEnd(){if(document.body.style.cursor="grab",!l.current)return;const y=()=>o(m.actions.finishMoving());l.current.to(p(h({},s),{easing:lt,onFinish:y})),o(m.actions.dragEnd())}}),jt=p(h(h({},g.current),d),{onMouseEnter(){z&&o(m.actions.select(void 0))}}),Ht=!L&&c(It,p(h({},jt),{fill:"#00aaff08"})),Wt=h({},B),Zt={text:v,fontSize:14,lineHeight:1.43,x:W,y:W,width:B.width-W*2,height:B.height-W*1.5},qt=!T&&c(ge,p(h({},Zt),{fill:"#fff"})),Ut=T&&c(Et,{variant:"standard",sx:{position:"absolute",left:0,top:0,width:B.width,height:B.height},InputProps:{sx:{px:.87,py:.8,fontSize:14}},autoFocus:!0,multiline:!0,rows:4,value:v,onChange:y=>o(m.actions.update({id:r,changes:{text:y.target.value}})),onKeyDown:y=>{y.code==="Enter"&&!y.shiftKey&&!y.nativeEvent.isComposing&&o(m.actions.editEnd())}}),_t=T&&c(X,{variant:"contained",size:"small",sx:{position:"absolute",left:B.width,top:B.height+6,transform:"translate3d(-100%, 0, 0)"},onClick:()=>o(m.actions.editEnd()),children:"OK"}),Qt=i&&z&&c(M,{sx:{position:"absolute",left:A,top:A,p:.5,bgcolor:dt,borderRadius:1},children:c(S,p(h({},{size:"small",onClick:()=>{if(!i)throw new Error;o(m.actions.delete(i))}}),{children:c(we,{fontSize:"inherit"})}))}),Vt={position:"absolute",left:B.width-A,top:A,transform:"translate3d(-100%, 0, 0)",p:.5,bgcolor:dt,borderRadius:1},Xt=z&&c(M,{sx:Vt,children:c(S,p(h({},{size:"small",onClick:()=>{o(m.actions.editStart())}}),{children:c(xe,{fontSize:"inherit"})}))}),Yt="all 300ms 0s ease",te=b==="horizontal"?"rotate(-90deg)":void 0,ee=z&&a&&c(S,p(h({},{size:"small",sx:{mr:.5},onClick:()=>{const y=b!=="vertical"?"vertical":"horizontal";o(m.actions.update({id:r,changes:{direction:y}}))}}),{children:c(ye,{fontSize:"inherit",sx:{transition:Yt,transform:te}})})),ne={size:"small",onClick:()=>o(m.actions.update({id:r,changes:{open:!a}}))},oe=f.length!==0?c(ue,{color:"primary",variant:"dot",children:c(bt,{fontSize:"inherit"})}):c(bt,{fontSize:"inherit"}),re=c(S,p(h({},ne),{children:a?c(me,{fontSize:"inherit"}):oe})),ie={position:"absolute",left:B.width-A,top:B.height-A,transform:"translate3d(-100%, -100%, 0)",display:"flex",p:.5,bgcolor:dt,borderRadius:1},se=(z||!T&&!k&&!a&&f.length!==0)&&E(M,{sx:ie,children:[ee,re]});return E(Y,{children:[Ht,E(fe,p(h({},Jt),{children:[c(It,p(h({},Wt),{fill:"#2348"})),qt,c(Ct,{children:c(tt,{theme:kt,children:E(M,{sx:{width:0,height:0,position:"relative"},children:[Ut,_t,Qt,Xt,se]})})})]}))]})},Ye=ve("main")(({theme:{breakpoints:t}})=>({height:"calc(100vh - 56px)",[`${t.up("xs")} and (orientation: landscape)`]:{height:"calc(100vh - 48px)"},[t.up("sm")]:{height:"calc(100vh - 64px)"}})),tn=({stageSize:t,entities:e,selected:n,addablePoints:o,dropZones:r})=>c(Ye,{children:c(Ee.Consumer,{children:({store:i})=>c(Ue,{stageSize:t,children:c(et,{store:i,children:E(be,{children:[e.map(s=>c(Xe,{entity:s,dropZones:r,selectedStatus:n},s.id)),c(Ct,{children:c(tt,{theme:kt,children:c(et,{store:i,children:c(M,{sx:{width:0,height:0,position:"relative"},children:!n||n.status==="selected"?o.map(s=>c(Kt,{point:s},`${s.left}:${s.top}`)):o.filter(s=>s.reserved).map(s=>c(Kt,{point:s},`${s.left}:${s.top}`))})})})})]})})})})}),en=t=>{const{flow:e,selected:n,addablePoints:o,dropZones:r}=t.entity;if(!e)throw new Error;const i=t.entity.entities[e.rootId];if(!i)throw new Error;const{tree:s}=i;if(!s)throw new Error;const{stagePadding:d}=ct,a={width:s.width+d*2,height:s.height+d*2},b=Nt.selectAll(t);return{stageSize:a,entities:b,selected:n,addablePoints:o,dropZones:r}},nn=Bt(en)(tn),Gt=t=>{const e=at(),n=at(),o=St(n,[],{type:"root"});return{id:e,title:t,rootId:n,entities:[o]}},D=mt(),on=D.getInitialState(),O=vt({name:"flow",initialState:on,reducers:{load(t,{payload:e}){D.addMany(t,e)},add(t,{payload:e}){D.addOne(t,e)},set(t,{payload:e}){D.setOne(t,e)}}}),ht=D.getSelectors(t=>t.flow),rn=()=>{const t=Q(),[e,n]=I.exports.useState(null),[o,r]=I.exports.useState(""),i=l=>{n(l.currentTarget)},s=()=>{r(""),n(null)},d=l=>r(l.target.value),a=()=>{const l=Gt(o);t(O.actions.add(l)),r(""),n(null)},b=l=>{if(l.code==="Enter"&&!l.nativeEvent.isComposing){const g=Gt(o);t(O.actions.add(g)),window.setTimeout(()=>{r(""),n(null)},0)}},f=Boolean(e),v=f?"simple-popover":void 0;return E(Y,{children:[c(S,{"aria-describedby":v,onClick:i,children:c(V,{fontSize:"inherit"})}),c(Ie,{id:v,open:f,anchorEl:e,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:E(M,{sx:{p:2},children:[c(Et,{id:"create-flow-title",label:"Flow Title",onChange:d,onKeyDown:b,autoFocus:!0,fullWidth:!0}),c(X,{sx:{mt:2},variant:"contained",startIcon:c(V,{}),fullWidth:!0,onClick:a,children:"New Flow"})]})})]})},sn=()=>c(rn,{}),cn=({flows:t})=>c(M,{component:"main",sx:{p:2},children:c(Pt,{container:!0,spacing:2,children:t.map(e=>c(Pt,{item:!0,xs:6,md:4,lg:3,children:c(Ce,{children:c(Be,{component:Mt,to:H.url({id:e.id}),disableRipple:!0,children:c(Pe,{sx:{height:200},children:c(Me,{children:e.title})})})})},e.id))})}),an=t=>({flows:ht.selectAll(t)}),dn=Bt(an)(cn),ln=()=>E(zt,{children:[c(G,{path:it.path,exact:!0,children:c(dn,{})}),c(G,{path:H.path,children:c(nn,{})})]}),hn=nt("div")(({theme:t})=>({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Rt(t.palette.common.white,.15),"&:hover":{backgroundColor:Rt(t.palette.common.white,.25)},marginLeft:0,width:"100%",[t.breakpoints.up("sm")]:{width:"auto"}})),pn=nt("div")(({theme:t})=>({padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"})),un=nt(ze)(({theme:t})=>({color:"inherit",width:"100%","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:`calc(1em + ${t.spacing(4)})`,transition:t.transitions.create("width"),width:"100%",[t.breakpoints.up("md")]:{width:"20ch"}}})),fn=()=>c(Re,{position:"static",children:E(Te,{children:[E(M,{sx:{display:{xs:"none",sm:"flex"}},children:[c(X,{component:Mt,to:it.path,size:"large",children:"Task Flow"}),c(ke,{orientation:"vertical",flexItem:!0,variant:"middle",sx:{mx:1}})]}),E(zt,{children:[c(G,{path:it.path,exact:!0,children:c(sn,{})}),c(G,{path:H.path,children:c(Ze,{})})]}),c(M,{sx:{flexGrow:1,pl:1}}),E(hn,{children:[c(pn,{children:c(Fe,{})}),c(un,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]})]})}),gn=()=>E(Y,{children:[c(fn,{}),c(ln,{})]}),Z="flows";function*wn(){const t=localStorage.getItem(Z),e=t?JSON.parse(t):[];yield J(O.actions.load(e))}function*xn(){for(;;){const{payload:t}=yield ot(O.actions.add.toString()),e=localStorage.getItem(Z),n=e?JSON.parse(e):[];localStorage.setItem(Z,JSON.stringify(n.concat(t)))}}function*yn(){for(;;){const{type:t}=yield ot("*");if(t.startsWith("flow-entity")){const e=yield rt(),{flow:n}=e.entity;if(!n)throw new Error;const o=Nt.selectAll(e);yield J(O.actions.set(p(h({},n),{entities:o})));const r=yield rt(ht.selectAll);localStorage.setItem(Z,JSON.stringify(r))}}}function*mn(){for(;;){yield ot(Ae);const t=yield rt(),e=H.matchSelector(t);if(!e||!e.isExact)continue;const n=ht.selectById(t,e.params.id);if(!n){yield J(Se("/"));continue}yield J(m.actions.setFlow(n))}}function*vn(){yield j(mn),yield j(wn),yield j(xn),yield j(yn)}const pt=Oe(),En=Le({router:$e(pt),flow:O.reducer,entity:m.reducer}),bn=()=>{const t=De(pt),e=Ne(),n=Ke({devTools:{actionsBlacklist:["flow/set","flow-entity/dragMoveReset"]},reducer:En,middleware:o=>o({thunk:!1}).concat([t,e])});return e.run(vn),n},In=bn(),Cn=()=>c(et,{store:In,children:c(Je,{history:pt,children:E(tt,{theme:We,children:[c(je,{}),c(gn,{})]})})});Ge.exports.render(c(Cn,{}),document.querySelector("#root"));
